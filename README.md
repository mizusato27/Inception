*This project has been created as part of the 42 curriculum by mizusato.*

# Inception

## Description
本プロジェクトは、Docker を使用したシステム管理の知識を深めることを目的とする。
Docker Compose を使用し、特定のルールに基づいて複数のサービス（NGINX, WordPress, MariaDB）で構成される小規模なインフラストラクチャを仮想マシン上に構築する。

ゼロから Web サーバスタックを構築することで、コンテナ化、ネットワーク構成、データの永続化といった基盤技術の仕組みを理解することを目指す。

![alt text](image.png)

## Instructions
### 前提条件
* マシンに Docker および Docker Compose がインストールされていること。
* ドメイン `login.42.fr` がローカルIPアドレス（またはポートフォワーディング使用時は `127.0.0.1`）を指すように設定されている

### インストールと実行
1. リポジトリをクローンする

2. コンテナをビルドして起動する
	```bash
	make
	# or
	make build
	```

3. Webサイトにアクセスする:ブラウザを開き、`https://login.42.fr` にアクセスする。

4. サービスを停止する
	```bash
	make down
	```

5. 環境をクリーンアップ（全データ削除）する
	```bash
	make fclean
	```

## Resources
[Docker ドキュメント](https://docs.docker.com/)

[NGINX ドキュメント](https://nginx.org/en/docs/)

[WordPress Codex](https://codex.wordpress.org/Main_Page)

[MariaDB ナレッジベース](https://mariadb.com/docs/)

## Project Description
### 仮想マシン(VM) vs Docker
* **仮想マシン (VM)**: ハイパーバイザー上で完全なゲストOSを実行する。ハードウェアをエミュレートするため、リソース（CPU、メモリ、ストレージ）の消費が大きく、起動にも時間がかかるが、強力な隔離性を提供する。

* **Docker (コンテナ)**: ホストOSのカーネルを共有し、ユーザー空間で隔離されたプロセスとして動作する。非常に軽量で、起動がほぼ一瞬であり、VMと比較してリソース効率が極めて高いのが特徴である。

### シークレット vs 環境変数
* **環境変数**: 設定値（ドメイン名やパスなど）を渡すのに便利だが、パスワードなどの機密情報を平文の環境変数として渡すと、`docker inspect` 等で容易に閲覧できてしまうリスクがある。

* **シークレット**: 機密情報（パスワード、鍵）を安全に管理するための仕組みである。Docker Secrets は転送中および保存時にデータを暗号化し、必要なコンテナにのみファイルとして（通常 `/run/secrets/` 配下に）公開する。

### Docker ネットワーク vs ホストネットワーク
* **Docker ネットワーク (Bridge)**: コンテナのデフォルト設定である。ソフトウェア的に定義された隔離ネットワークを作成し、コンテナ間はサービス名で通信（名前解決）できる。ホストや外部からの隔離性が高く、セキュリティ面で有利である。

* **ホストネットワーク**: コンテナがホストのネットワーク名前空間を直接共有する。NAT のオーバーヘッドがないため高速だが、コンテナのポートがホスト上で直接占有されるため、ポート競合のリスクがあり、隔離レベルが低下する。

### Docker ボリューム vs バインドマウント
* **バインドマウント**: ホスト上の特定のファイルやディレクトリをコンテナに直接マッピングする。ホストのディレクトリ構造やパーミッションに依存するが、開発時（コードの即時反映など）には便利である。

* **Dockerボリューム**: Dockerが作成・管理する保存領域である（通常 `/var/lib/docker/volumes` 配下）。ホストのディレクトリ構造に依存せず、バックアップや移行が容易で、Linux 以外のホスト上でも高いパフォーマンスを発揮する。
